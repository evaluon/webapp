"use strict";angular.module("starter",["ionic","starter.controllers","starter.services","app.templates","starter.evaluation.controllers","starter.evaluation.services","starter.results.controllers","starter.results.services","starter.configuration.controllers","LocalStorageModule"]).config(function($stateProvider,$urlRouterProvider,$locationProvider,routingConfigProvider,localStorageServiceProvider,$httpProvider){$stateProvider.state("public",{"abstract":!0,data:{access:routingConfigProvider.accessLevels.public}}),$stateProvider.state("login",{url:"/",templateUrl:"views/login.tpl.html",controller:"LoginCtrl",data:{access:routingConfigProvider.accessLevels.anon}}).state("registro",{url:"/registro",templateUrl:"views/registro.tpl.html",controller:"RegistroCtrl",data:{access:routingConfigProvider.accessLevels.anon}}),$stateProvider.state("home",{url:"/home",templateUrl:"views/home.tpl.html",controller:"HomeCtrl",data:{access:routingConfigProvider.accessLevels.user}}),$stateProvider.state("evaluation",{url:"/evaluation/institutions",templateUrl:"views/evaluation/institutions.tpl.html",controller:"EvaluationInstitutesCtrl",data:{access:routingConfigProvider.accessLevels.user}}).state("evaluation-groups",{url:"/evaluation/groups/:id",templateUrl:"views/evaluation/groups.tpl.html",controller:"EvaluationGroupsCtrl",data:{access:routingConfigProvider.accessLevels.user}}).state("evaluation-tests",{url:"/evaluation/tests/:id",templateUrl:"views/evaluation/tests.tpl.html",controller:"EvaluationTestsCtrl",data:{access:routingConfigProvider.accessLevels.user}}).state("evaluation-knowledge-area",{url:"/evaluation/knowledge-area/:id",templateUrl:"views/evaluation/knowledge-area.tpl.html",controller:"EvaluationKnowledgeAreaCtrl",data:{access:routingConfigProvider.accessLevels.user}}).state("evaluation-test-area",{url:"/evaluation/test/:id/area/:area",templateUrl:"views/evaluation/test.tpl.html",controller:"EvaluationTestCtrl",data:{access:routingConfigProvider.accessLevels.user}}),$stateProvider.state("selfEvaluation",{url:"/evaluate/institutions",templateUrl:"views/evaluation/institutions.tpl.html",controller:"EvaluationInstitutesCtrl",data:{access:routingConfigProvider.accessLevels.user}}).state("selfEvaluation-groups",{url:"/evaluate/groups/:id",templateUrl:"views/evaluation/groups.tpl.html",controller:"EvaluationGroupsCtrl",data:{access:routingConfigProvider.accessLevels.user}}).state("selfEvaluation-test",{url:"/evaluation/evaluation/:id",templateUrl:"views/evaluation/tests.tpl.html",controller:"EvaluationTestsCtrl",data:{access:routingConfigProvider.accessLevels.user}}),$urlRouterProvider.otherwise("/"),$locationProvider.html5Mode(!1),localStorageServiceProvider.setPrefix("Evaluon");var alertDismissed=function(){},interceptor=["$q",function($q){function success(response){return response}function error(response){switch(response.status){case 500:alertError("Alerta","Error desconocido, verifica tu conexión a internet");break;case 404:alertError("Alerta","Error desconocido, verifica tu conexión a internet");break;default:alertError("Alerta","Error desconocido, verifica tu conexión a internet")}return $q.reject(response)}var alertError=function(title,message){navigator&&navigator.notification?navigator.notification.alert(message,alertDismissed,title,"Aceptar"):alert(message)};return function(promise){return promise.then(success,error)}}];$httpProvider.responseInterceptors.push(interceptor)}).run(function($ionicPlatform,$rootScope,Auth){$ionicPlatform.ready(function(){Auth.authClient(),navigator&&navigator.notification,window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),window.MobileAccessibility&&($rootScope.access=MobileAccessibility)}),$rootScope.$on("$stateChangeStart",function(){})}),angular.module("starter.controllers",[]).controller("LoginCtrl",function($scope,$state,Auth){$scope.user={},$scope.login=function(event){event.preventDefault(),Auth.login($scope.user.username,$scope.user.password)}}).controller("RegistroCtrl",function($scope,Auth){$scope.$on("$viewContentLoaded",function(){$("#textInit").focus()}),$scope.registrar=function($scope,user){event.preventDefault(),user.middle_name=" ",_.map(user.names.split(" "),function(name,index){0===index?user.first_name=name:user.middle_name=user.middle_name+" "+name}),Auth.createUser({id:user.id,first_name:user.first_name,middle_name:user.middle_name,last_name:user.last_name,birth_date:user.birth_date,mail:user.mail,password:CryptoJS.SHA1(user.password).toString()})}}).controller("HomeCtrl",function($scope,Auth){$scope.$on("$viewContentLoaded",function(){$("#textInit").focus()}),$scope.logout=function(){Auth.logout()}}),angular.module("starter.services",[]).factory("Auth",function($http,$ionicLoading,$ionicPopup,$state,localStorageService,api,access,routingConfig){var API={authClient:function(data){return $http({method:"post",url:api.url+api.login,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(data)})},login:function(data){return $http({method:"post",url:api.url+api.login,headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.client).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.client).toString()).access_token,"Content-Type":"application/x-www-form-urlencoded"},data:$.param(data)})},createUser:function(data){return $http({method:"post",url:api.url+api.user,headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.client).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.client).toString()).access_token,"Content-Type":"application/json"},data:data})}},error=function(){$ionicLoading.hide()};return{authClient:function(){$ionicLoading.show({template:"Cargando..."});var success=function(success){$ionicLoading.hide(),localStorageService.set(CryptoJS.SHA1(access.tokens.client),success.data)};API.authClient(access.client).then(success,error)},isAuth:function(){},isLoggedIn:function(){return localStorageService.get(CryptoJS.SHA1(access.tokens.client).toString())?!0:!1},login:function(username,password){$ionicLoading.show({template:"Cargando..."});var success=function(success){$ionicLoading.hide(),success.data.role=routingConfig.userRoles.user,localStorageService.set(CryptoJS.SHA1(access.tokens.user).toString(),success.data),$state.go("home")},error=function(){$ionicLoading.hide()},data={grant_type:"password",username:username,password:CryptoJS.SHA1(password).toString()};API.login(data).then(success,error)},createUser:function(data){$ionicLoading.show({template:"Cargando..."}),API.createUser(data).then(function(){var loginData={username:data.mail,password:data.password};API.login(loginData).then(function(success){console.log(success)}).catch(function(error){console.log(error)})}).catch(function(error){$ionicLoading.hide(),console.log(error)})},logout:function(){localStorageService.remove(CryptoJS.SHA1(access.tokens.user).toString()),$state.go("login")}}}).provider("routingConfig",function(){this.userRoles={"public":1,user:2,admin:4},this.accessLevels={"public":this.userRoles.public|this.userRoles.user|this.userRoles.admin,anon:this.userRoles.public,user:this.userRoles.user|this.userRoles.admin,admin:this.userRoles.admin},this.$get=function(){var that=this;return{userRoles:that.userRoles,accessLevels:that.accessLevels}}}).constant("api",{url2:"http://192.168.43.171:3004",url:"http://evaluon.boolinc.co:80",login:"/auth/token",institution:"/institution",group:"/group",test:"/test",knowledgeArea:"/knowledgearea",testQuestions:"/question",response:"/response",user:"/user"}).constant("access",{client:{grant_type:"client_credentials",client_id:"administrator",client_secret:"kv0Ls8xoIFPdE2GXMK5fodQsAEBV5GzzINZOA0NX99E="},tokens:{client:"alv236c0",user:"ams43ksl"}}),angular.module("app.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("views/home.tpl.html",'<ion-view title="Menú Principal" hide-back-button="true">\n  <ion-content class="padding">\n    <div class="row padding">\n      <div class="col divIcon">\n        <h2>Evaluación</h2>\n        <a ui-sref="evaluation"><img src="./img/1.png" alt="Encuentra las pruebas que debes presentar según su asignatura"></a>\n      </div>\n      <div class="col divIcon">\n        <h2>Evalúate</h2>\n        <a ui-sref="evaluate"><img src="./img/2.png" alt="Reta tu conocimiento y prepárate para tus pruebas"></a>\n      </div>\n    </div>\n    <div class="row padding">\n      <div class="col divIcon">\n        <h2>Resultados</h2>\n        <a href=""><img src="./img/3.png" alt="Revisa el puntaje en poco tiempo y la retroalimentación para mejorar "></a>\n      </div>\n      <div class="col divIcon">\n        <h2>Promedio Aprendizaje</h2>\n        <a href=""><img src="./img/4.png" alt="Conoce los avances de tus conocimiento"></a>\n      </div>\n    </div>\n    <div class="row padding">\n      <div class="col divIcon">\n        <h2>Configuraciones</h2>\n        <a href=""><img src="./img/3.png" alt="Configura tu aplicación"></a>\n      </div>\n      <div class="col divIcon">\n        <h2>Cerrar Sesión</h2>\n        <a href="" ng-click="logout()"><img src="./img/4.png" alt="Cierra esta sesión"></a>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),$templateCache.put("views/login.tpl.html",'<ion-view title="Iniciar Sesión" hide-back-button="true" >\n  <ion-content class="padding">\n    <form class="list" ng-submit="login($event)">\n      <label class="item item-input">\n        <span class="input-label" tabindex="-1">Correo</span>\n        <input type="email" aria-describedby="login-user-input-text" ng-model="user.username" required>\n        <p id="login-user-input-text" class="aria-description">Ingrese el correo</p>\n      </label>\n      <label class="item item-input">\n        <span class="input-label" tabindex="-1">Contraseña</span>\n        <input type="password" aria-describedby="login-user-input-pass" ng-model="user.password" required>\n        <p id="login-user-input-pass" class="aria-description">Ingrese la contraseña</p>\n      </label>\n      <input type="submit" class="button button-block button-inci" value="Iniciar Sesion" ng-model="user.password">\n    </form>\n    <a ui-sref="registro" ><button class="button button-block button-inci">Registrarse</button></a>\n  </ion-content>\n</ion-view>\n'),$templateCache.put("views/registro.tpl.html",'<ion-view title="Registro">\n  <ion-content class="padding">\n    <form class="list" ng-submit="registrar($event, user)">\n      <label class="item item-input item-stacked-label">\n        <span class="input-label">Número de documento</span>\n        <input type="number"  aria-describedby="registro-user-document" ng-model="user.id" ng-required required>\n        <p id= "registro-user-document" class="aria-description">Digite su número de documento</p>\n      </label>\n      <label class="item item-input item-stacked-label">\n        <span class="input-label">Nombres</span>\n        <input type="text"  aria-describedby="registro-user-name" ng-model="user.names" ng-required required>\n        <p id= "registro-user-name" class="aria-description">Digite su nombre</p>\n      </label>\n      <label class="item item-input item-stacked-label">\n        <span class="input-label">Apellidos</span>\n        <input type="text"  aria-describedby="registro-user-surname" ng-model="user.last_name" ng-required required>\n        <p id="registro-user-surname" class="aria-description">Digite sus apellidos</p>\n      </label>\n      <label class="item item-input item-stacked-label">\n        <span class="input-label">Fecha de nacimiento</span>\n        <input type="date"  aria-describedby="registro-user-birthdate" ng-model="user.birth_date" ng-required required>\n        <p id="registro-user-birthdate" class="aria-description">Ingrese su fecha de nacimiento</p>\n      </label>\n      <label class="item item-input item-stacked-label">\n        <span class="input-label" >Correo</span>\n        <input type="email" aria-describedby="registro-user-mail" ng-model="user.mail" ng-required required>\n        <p id ="registro-user-mail" class="aria-description">Digite su correo</p>\n      </label>\n      <label class="item item-input item-stacked-label" ng-required required>\n        <span class="input-label">Contraseña</span>\n        <input type="password" aria-describedby="registro-user-id" ng-model="user.password" ng-required required>\n        <span id ="registro-user-id" class="aria-description">Por último, digite su contraseña</span>\n      </label>\n      </label>\n      <input type="submit" class="button button-block button-inci" value="Registrar">\n    </form>\n  </ion-content>\n</ion-view>\n'),$templateCache.put("views/test.tpl.html",'<ion-view title="Examen">\n  <ion-content class="padding">\n    <h2 id="testTitle">Prueba de Biología - Colegio</h2>\n    <div class="card">\n      <div class="item item-text-wrap">\n        <br>\n        <h3>Tipos de preguntas</h3>\n        <p>En el examen se utilizan preguntas de selección múltiple con única respuesta y preguntas abiertas de respuesta corta.</p>\n        <p>Las preguntas de selección múltiple con única respuesta están conformadas por un enunciado, la formulación de una tarea de evaluación y cuatro opciones de respuesta, codificadas como A, B, C y D, de las cuales sólo una es correcta o válida dada la tarea planteada.</p>\n        <p>Las preguntas abiertas de respuesta corta no presentan opciones de respuesta. El estudiante construye (produce, elabora, escribe) una respuesta de acuerdo con la tarea que se le ha asignado, en el espacio definido.</p>\n        <p>Puedes desplazarte por las preguntas y respuestas, cuándo quieras responder acertadamente a una opción solo basta un doble click.</p>\n      </div>\n    </div>\n    <h2>Preguntas:</h2>\n    <div class="list card" ng-repeat = "question in questions">\n\n      <div class="item">\n        <h3>{{question.id}}.</h3>\n        <p>{{question.text}}</p>\n      </div>\n\n      <div class="item item-image">\n      </div>\n\n      <div class="list">\n\n        <label class="item item-radio">\n          <input type="radio" name="group">\n          <div class="item-content">\n            <p><strong>a.</strong>  {{question.answerOptions[0].text}}</p>\n          </div>\n          <i class="radio-icon ion-checkmark"></i>\n        </label>\n        <label class="item item-radio">\n          <input type="radio" name="group">\n          <div class="item-content">\n            <p><strong>b.</strong>  {{question.answerOptions[1].text}}</p>\n          </div>\n          <i class="radio-icon ion-checkmark"></i>\n        </label>\n        <label class="item item-radio">\n          <input type="radio" name="group">\n          <div class="item-content">\n            <p><strong>c.</strong>  {{question.answerOptions[2].text}}</p>\n          </div>\n          <i class="radio-icon ion-checkmark"></i>\n        </label>\n        <label class="item item-radio">\n          <input type="radio" name="group">\n          <div class="item-content">\n            <p><strong>d.</strong>  {{question.answerOptions[3].text}}</p>\n          </div>\n          <i class="radio-icon ion-checkmark"></i>\n        </label>\n      </div>\n    </div>\n    <button class="button button-full button-inci">Verificar respuestas</button>\n    <a ui-sref="home"><button class="button button-full button-inci" ng-click="alert(\'Gracias\');">Enviar</button></a>\n  </ion-content>\n</ion-view>\n'),$templateCache.put("views/evaluation/groups.tpl.html",'<ion-view title="Menu Grupos">\n  <ion-content class="padding">\n    <div class="row padding" ng-repeat="groups in rowGroups">\n      <div class="col divIcon" ng-repeat="group in groups">\n        <h2 class="titleInci">{{group.id}}</h2>\n        <a ui-sref="{{routes.test}}({id: {{group.id}}})"><img src="http://devbool.blob.core.windows.net/evaluon/7.png" alt="Colegio Inem de Bucaramamnga"></a>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),$templateCache.put("views/evaluation/institutions.tpl.html",'<ion-view title="Instituciones">\n  <ion-content class="padding">\n    <div class="row padding" ng-repeat="institutes in rowInstitutes">\n      <div class="col divIcon" ng-repeat="institute in institutes">\n        <h2 class="titleInci">{{institute.name}}</h2>\n        <a ui-sref="{{routes.groups}}({id: {{institute.id}}})"><img src="http://devbool.blob.core.windows.net/evaluon/7.png" alt="Colegio Inem de Bucaramamnga"></a>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),$templateCache.put("views/evaluation/knowledge-area.tpl.html",'<ion-view title="Areas de Conocimiento">\n  <ion-content class="padding">\n    <div class="row padding" ng-repeat="tests in rowTestsDetails">\n      <div class="col divIcon" ng-repeat="test in tests">\n\n        <h2 class="titleInci">{{test.id}}</h2>\n        <a ui-sref="{{routes.test}}({id: {{routes.testId}}, area: {{\'test.id\'}} })"><img src="http://devbool.blob.core.windows.net/evaluon/7.png" alt="{{test.description}}"></a>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n'),$templateCache.put("views/evaluation/test.tpl.html",'<ion-view title="Examen de {{params.area}}">\n  <ion-content class="padding">\n    <div class="card">\n      <div class="item item-text-wrap">\n        <h3>Examen evaluon</h3>\n        <p>Ten en cuenta que el examen se anulará al cerrar la aplicación</p>\n        <br>\n        <h3>Tipos de preguntas</h3>\n        <p>En el examen se utilizan preguntas de selección múltiple con única respuesta y preguntas abiertas de respuesta corta.</p>\n        <p>Las preguntas de selección múltiple con única respuesta están conformadas por un enunciado, la formulación de una tarea de evaluación y cuatro opciones de respuesta, codificadas como A, B, C y D, de las cuales sólo una es correcta o válida dada la tarea planteada.</p>\n        <p>Las preguntas abiertas de respuesta corta no presentan opciones de respuesta. El estudiante construye (produce, elabora, escribe) una respuesta de acuerdo con la tarea que se le ha asignado, en el espacio definido.</p>\n        <p>Puedes desplazarte por las preguntas y respuestas, cuándo quieras responder acertadamente a una opción solo basta un doble click.</p>\n      </div>\n    </div>\n    <h2>Preguntas:</h2>\n\n    <div class="list">\n      <div class="answer" ng-repeat="question in questions">\n        <div class="item item-divider">\n          <h3 id ="answer-{{$index}}">{{$index + 1}}.</h3>\n          <p>{{question.description_text}}</p>\n        </div>\n        <ion-radio ng-repeat =" answer in question.answers" ng-value="\'{{answer.id}}\'" ng-model="question.answer"   name="answer{{answer.id}}"><p><strong>{{\'abcdefghijklmnopqrstuvwxyz\'[$index]}}.</strong>  {{answer.description_text}} </p></ion-radio>\n      </div>\n    </div>\n\n    <!--<div class="list card" ng-repeat = "question in questions">\n      <div class="item">\n        <h3 id ="answer-{{$index}}">{{$index + 1}}.</h3>\n        <p>{{question.description_text}}</p>\n      </div>\n\n      <div class="list">\n        <ion-radio ng-model="question.answer" ng-repeat =" answer in question.answers" ng-value="\'{{answer.id}}\'" ><p><strong>{{\'abcdefghijklmnopqrstuvwxyz\'[$index]}}.</strong>  {{answer.description_text}} </p></ion-radio>\n      </div>\n    </div>-->\n\n    <button class="button button-full button-inci" ng-click="verifyAnswers()">Preguntas no contestadas</button>\n    <button class="button button-full button-inci" ng-click="rollbackAnswers()" ng-if="rollbackAnswersFlag">Volver al original</button>\n    <button class="button button-full button-inci" ng-click="sendAnswers()">Enviar</button>\n  </ion-content>\n</ion-view>\n'),$templateCache.put("views/evaluation/tests.tpl.html",'<ion-view title="Evaluaciones">\n  <ion-content class="padding">\n    <div class="row padding" ng-repeat="tests in rowTests">\n      <div class="col divIcon" ng-repeat="test in tests">\n\n        <h2 class="titleInci">{{test.id}}</h2>\n        <a ui-sref="{{routes.testsDetails}}({id: {{test.id}}})"><img src="http://devbool.blob.core.windows.net/evaluon/7.png" alt="{{test.description}}"></a>\n      </div>\n    </div>\n  </ion-content>\n</ion-view>\n')}]),angular.module("starter.configuration.controllers",[]).controller("AboutCtrl",function(){}),angular.module("starter.evaluation.controllers",[]).controller("EvaluationInstitutesCtrl",function($scope,evaluationInstitutes){$scope.rowInstitutes=[],$scope.routes={groups:"evaluation-groups"};var doubled=function(list,newL){return newL||(newL=[]),0==list.length?newL:doubled(_.tail(list,2),_.union(newL,[_.head(list,2)]))};evaluationInstitutes.getAll().then(function(success){success&&($scope.rowInstitutes=doubled(success.data.data))}).catch(function(error){console.log(error)})}).controller("EvaluationGroupsCtrl",function($scope,$stateParams,evaluationGroups){$scope.rowGroups=[],$scope.routes={test:"evaluation-tests"};var doubled=function(list,newL){return newL||(newL=[]),0==list.length?newL:doubled(_.tail(list,2),_.union(newL,[_.head(list,2)]))};evaluationGroups.getGroupsByInstitutionId($stateParams.id).then(function(success){success&&($scope.rowGroups=doubled(success.data.data))}).catch(function(error){console.log(error)})}).controller("EvaluationTestsCtrl",function($scope,$stateParams,evaluationTests){$scope.rowTests=[],$scope.routes={testsDetails:"evaluation-knowledge-area"};var doubled=function(list,newL){return newL||(newL=[]),0==list.length?newL:doubled(_.tail(list,2),_.union(newL,[_.head(list,2)]))};evaluationTests.getTestsByGroupId($stateParams.id).then(function(success){success&&($scope.rowTests=doubled(success.data.data))}).catch(function(error){console.log(error)})}).controller("EvaluationKnowledgeAreaCtrl",function($scope,$stateParams,evaluationKnowledgeArea){$scope.rowTestsDetails=[],$scope.routes={test:"evaluation-test-area",testId:$stateParams.id};var doubled=function(list,newL){return newL||(newL=[]),0==list.length?newL:doubled(_.tail(list,2),_.union(newL,[_.head(list,2)]))};evaluationKnowledgeArea.getAllKnowledgeArea($stateParams.id).then(function(success){success&&($scope.rowTestsDetails=doubled(success.data.data))}).catch(function(error){console.log(error)})}).controller("EvaluationTestCtrl",function($scope,$stateParams,evaluationTest){$scope.test={},$scope.questions=[],$scope.params=$stateParams,$scope.respuesta={},$scope.rollbackAnswersFlag=!1,evaluationTest.getTestAnswersByArea($stateParams).then(function(success){success&&($scope.questions=success.data.data)}).catch(function(error){console.log(error)}),$scope.verifyAnswers=function(){$scope.rollbackAnswersFlag=!0;var firstUnanswered=null;_.each($scope.questions,function(question,index){question.answer?$("#answer-"+index).replaceWith('<p id="answer-'+index+'">'+(index+1)+".</p>"):null===firstUnanswered&&(firstUnanswered=index,$("#answer-"+index).focus())})},$scope.rollbackAnswers=function(){$scope.rollbackAnswersFlag=!1,_.each($scope.questions,function(question,index){$("#answer-"+index).replaceWith('<h3 id="answer-'+index+'">'+(index+1)+".</h3>")})},$scope.sendAnswers=function(){evaluationTest.sendAnswers($stateParams.id,$scope.questions)}}),angular.module("starter.evaluation.services",[]).factory("evaluationInstitutes",function($http,$ionicLoading,localStorageService,api,access){var API={getAllInstitutes:function(){return $http({method:"get",url:api.url+api.institution,headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).access_token}})}};return{getAll:function(){return $ionicLoading.show({template:"Cargando..."}),API.getAllInstitutes().then(function(success){return $ionicLoading.hide(),success}).catch(function(){$ionicLoading.hide()})}}}).factory("evaluationGroups",function($http,$ionicLoading,localStorageService,api,access){var API={getGroupsByInstitutionId:function(institutionId){return $http({method:"get",url:api.url+api.group+"/"+institutionId,headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).access_token,"Content-Type":"application/json"}})}};return{getGroupsByInstitutionId:function(institutionId){return $ionicLoading.show({template:"Cargando..."}),API.getGroupsByInstitutionId(institutionId).then(function(success){return $ionicLoading.hide(),success}).catch(function(){$ionicLoading.hide()})}}}).factory("evaluationTests",function($http,$ionicLoading,localStorageService,api,access){var API={getTestsByGroupId:function(groupId){return $http({method:"get",url:api.url+api.test+api.group+"/"+groupId+"/all",headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).access_token,"Content-Type":"application/json"}})}};return{getTestsByGroupId:function(groupId){return $ionicLoading.show({template:"Cargando..."}),API.getTestsByGroupId(groupId).then(function(success){return $ionicLoading.hide(),success}).catch(function(){$ionicLoading.hide()})}}}).factory("evaluationKnowledgeArea",function($http,$ionicLoading,localStorageService,api,access){var API={getAllKnowledgeArea:function(testId){return $http({method:"get",url:api.url+api.test+"/"+testId+api.knowledgeArea,headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).access_token,"Content-Type":"application/json"}})}};return{getAllKnowledgeArea:function(testId){return $ionicLoading.show({template:"Cargando..."}),API.getAllKnowledgeArea(testId).then(function(success){return $ionicLoading.hide(),success}).catch(function(){$ionicLoading.hide()})}}}).factory("evaluationTest",function($http,$ionicLoading,$q,localStorageService,api,access){var API={getTestAnswersByArea:function(test){return $http({method:"get",url:api.url+api.test+"/"+test.id+api.testQuestions+"/"+test.area,headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).access_token,"Content-Type":"application/json"}})},getTestById:function(testId){return $http({method:"get",url:api.url+api.test+"/"+testId,headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).access_token,"Content-Type":"application/json"}})},sendAnswers:function(test,data){for(var qs=[],i=0;i<data.length;i++)qs.push(function(d){return $http({method:"post",url:api.url+api.response,headers:{Authorization:localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).token_type+" "+localStorageService.get(CryptoJS.SHA1(access.tokens.user).toString()).access_token,"Content-Type":"application/json"},data:{test_id:test,question_id:d.id,answer_id:d.answer}})}(data[i]));return $q.all(qs).then(function(responses){var qSent=_.reduce(responses,function(a,r){return a+r},0);qSent===qs.length?console.log("All questions sent"):console.log("%d/%d questions sent",qSent,qs.length)})}};return{getTestAnswersByArea:function(test){return $ionicLoading.show({template:"Cargando..."}),API.getTestAnswersByArea(test).then(function(success){return $ionicLoading.hide(),success}).catch(function(){$ionicLoading.hide()})},getTestById:function(){return $ionicLoading.show({template:"Cargando..."}),API.getTestAnswersByArea(test).then(function(success){return $ionicLoading.hide(),success}).catch(function(){$ionicLoading.hide()})},sendAnswers:function(testId,data){$ionicLoading.show({template:"Cargando..."}),API.sendAnswers(testId,data).then(function(success){$ionicLoading.hide(),console.log(success)}).catch(function(error){$ionicLoading.hide(),console.log(error)})}}}),angular.module("starter.results.controllers",[]).controller("ResultsCtrl",function(){}),angular.module("starter.results.services",[]);var CryptoJS=CryptoJS||function(e,m){var p={},j=p.lib={},l=function(){},f=j.Base={extend:function(a){l.prototype=this;var c=new l;return a&&c.mixIn(a),c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)}),c.init.prototype=c,c.$super=this,c},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},n=j.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=m?c:4*a.length},toString:function(a){return(a||h).stringify(this)},concat:function(a){var c=this.words,q=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var b=0;a>b;b++)c[d+b>>>2]|=(q[b>>>2]>>>24-8*(b%4)&255)<<24-8*((d+b)%4);else if(65535<q.length)for(b=0;a>b;b+=4)c[d+b>>>2]=q[b>>>2];else c.push.apply(c,q);return this.sigBytes+=a,this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<32-8*(c%4),a.length=e.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var c=[],b=0;a>b;b+=4)c.push(4294967296*e.random()|0);return new n.init(c,a)}}),b=p.enc={},h=b.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],d=0;a>d;d++){var f=c[d>>>2]>>>24-8*(d%4)&255;b.push((f>>>4).toString(16)),b.push((15&f).toString(16))}return b.join("")},parse:function(a){for(var c=a.length,b=[],d=0;c>d;d+=2)b[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new n.init(b,c/2)}},g=b.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var b=[],d=0;a>d;d++)b.push(String.fromCharCode(c[d>>>2]>>>24-8*(d%4)&255));return b.join("")},parse:function(a){for(var c=a.length,b=[],d=0;c>d;d++)b[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new n.init(b,c)}},r=b.Utf8={stringify:function(a){try{return decodeURIComponent(escape(g.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data")}},parse:function(a){return g.parse(unescape(encodeURIComponent(a)))}},k=j.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new n.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=r.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,b=c.words,d=c.sigBytes,f=this.blockSize,h=d/(4*f),h=a?e.ceil(h):e.max((0|h)-this._minBufferSize,0);if(a=h*f,d=e.min(4*a,d),a){for(var g=0;a>g;g+=f)this._doProcessBlock(b,g);g=b.splice(0,a),c.sigBytes-=d}return new n.init(g,d)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});j.Hasher=k.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){k.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,b){return new a.init(b).finalize(c)}},_createHmacHelper:function(a){return function(b,f){return new s.HMAC.init(a,f).finalize(b)}}});var s=p.algo={};return p}(Math);!function(){var e=CryptoJS,m=e.lib,p=m.WordArray,j=m.Hasher,l=[],m=e.algo.SHA1=j.extend({_doReset:function(){this._hash=new p.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(f,n){for(var b=this._hash.words,h=b[0],g=b[1],e=b[2],k=b[3],j=b[4],a=0;80>a;a++){if(16>a)l[a]=0|f[n+a];else{var c=l[a-3]^l[a-8]^l[a-14]^l[a-16];l[a]=c<<1|c>>>31}c=(h<<5|h>>>27)+j+l[a],c=20>a?c+((g&e|~g&k)+1518500249):40>a?c+((g^e^k)+1859775393):60>a?c+((g&e|g&k|e&k)-1894007588):c+((g^e^k)-899497514),j=k,k=e,e=g<<30|g>>>2,g=h,h=c}b[0]=b[0]+h|0,b[1]=b[1]+g|0,b[2]=b[2]+e|0,b[3]=b[3]+k|0,b[4]=b[4]+j|0},_doFinalize:function(){var f=this._data,e=f.words,b=8*this._nDataBytes,h=8*f.sigBytes;
return e[h>>>5]|=128<<24-h%32,e[(h+64>>>9<<4)+14]=Math.floor(b/4294967296),e[(h+64>>>9<<4)+15]=b,f.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var e=j.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=j._createHelper(m),e.HmacSHA1=j._createHmacHelper(m)}();